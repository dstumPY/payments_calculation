<!DOCTYPE html>
<html lang='de'>

<head>
    <meta charset='UTF-8'>
    <title>Build a table</title>
    <link rel='stylesheet' href='mystyle.css'>
</head>

<body>
    <!-- left payment input box -->
    <div class='box_left' id='box_left'>
        <div class='container'>
            <div class='box_euro_unit_left'>500€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input500_left>
            <div class='box_euro_sum_left' id='out500_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>200€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input200_left>
            <div class='box_euro_sum_left' id='out200_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>100€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input100_left>
            <div class='box_euro_sum_left' id='out100_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>50€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input50_left>
            <div class='box_euro_sum_left' id='out50_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>20€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input20_left>
            <div class='box_euro_sum_left' id='out20_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>10€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input10_left>
            <div class='box_euro_sum_left' id='out10_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>5€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input5_left>
            <div class='box_euro_sum_left' id='out5_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>2€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input2_left>
            <div class='box_euro_sum_left' id='out2_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>1€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input1_left>
            <div class='box_euro_sum_left' id='out1_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>0,50€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input050_left>
            <div class='box_euro_sum_left' id='out050_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>0,20€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input020_left>
            <div class='box_euro_sum_left' id='out020_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>0,10€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input010_left>
            <div class='box_euro_sum_left' id='out010_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>0,05€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input005_left>
            <div class='box_euro_sum_left' id='out005_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>0,02€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input002_left>
            <div class='box_euro_sum_left' id='out002_left'>0</div>
        </div>
        <div class='container'>
            <div class='box_euro_unit_left'>0,01€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input001_left>
            <div class='box_euro_sum_left' id='out001_left'>0</div>
        </div>
        <div id='sum_container' class='sum_container'>
            <div class='box_euro_unit_left'>Summe aktuell:</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id=input_sum_actual_left>
            <div class='box_euro_sum_left' id='complete_sum_left'>0</div>
        </div>
    </div>

    <div class='box_button' id='box_button'>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='container' style='visibility:hidden'><input type="invisible" class='input_unit' style='visibility:hidden'></div>
        <div class='sum_container'>
            <button type='button' id='button_calculation'>Klick mich!</button>
        </div>
    </div>

    <!-- middle output box -->
    <div class='box_middle' id='box_middle'>
        <div id='container500' class='container'>
            <div class='box_euro_unit_middle'>500€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out500_middle'>0</div>
        </div>
        <div id='container200' class='container'>
            <div class='box_euro_unit_middle'>200€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out200_middle'>0</div>
        </div>
        <div id='container100' class='container'>
            <div class='box_euro_unit_middle'>100€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out100_middle'>0</div>
        </div>
        <div id='container50' class='container'>
            <div class='box_euro_unit_middle'>50€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out50_middle'>0</div>
        </div>
        <div id='container20' class='container'>
            <div class='box_euro_unit_middle'>20€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out20_middle'>0</div>
        </div>
        <div id='container10' class='container'>
            <div class='box_euro_unit_middle'>10€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out10_middle'>0</div>
        </div>
        <div id='container5' class='container'>
            <div class='box_euro_unit_middle'>5€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out5_middle'>0</div>
        </div>
        <div id='container2' class='container'>
            <div class='box_euro_unit_middle'>2€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out2_middle'>0</div>
        </div>
        <div id='container1' class='container'>
            <div class='box_euro_unit_middle'>1€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out1_middle'>0</div>
        </div>
        <div id='container050' class='container'>
            <div class='box_euro_unit_middle'>0,50€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out050_middle'>0</div>
        </div>
        <div id='container020' class='container'>
            <div class='box_euro_unit_middle'>0,20€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out020_middle'>0</div>
        </div>
        <div id='container010' class='container'>
            <div class='box_euro_unit_middle'>0,10€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out010_middle'>0</div>
        </div>
        <div id='container005' class='container'>
            <div class='box_euro_unit_middle'>0,05€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out005_middle'>0</div>
        </div>
        <div id='container002' class='container'>
            <div class='box_euro_unit_middle'>0,02€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out002_middle'>0</div>
        </div>
        <div id='container001' class='container'>
            <div class='box_euro_unit_middle'>0,01€</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='out001_middle'>0</div>
        </div>
        <div id='sum_container' class='sum_container'>
            <div class='box_euro_unit_middle'>Summe Differenz:</div>
            <input class='input_unit' style='visibility: hidden'>
            <div class='box_euro_sum_middle' id='complete_sum_middle'>0</div>
        </div>

    </div>

    <!-- right payment input box -->
    <div class='box_right' id='box_right'>
        <div id='container500' class='container'>
            <div class='box_euro_unit_right'>500€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input500_right'>
            <div class='box_euro_sum_right' id='out500_right'>0</div>
        </div>
        <div id='container200' class='container'>
            <div class='box_euro_unit_right'>200€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input200_right'>
            <div class='box_euro_sum_right' id='out200_right'>0</div>
        </div>
        <div id='container100' class='container'>
            <div class='box_euro_unit_right'>100€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input100_right'>
            <div class='box_euro_sum_right' id='out100_right'>0</div>
        </div>
        <div id='container50' class='container'>
            <div class='box_euro_unit_right'>50€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input50_right'>
            <div class='box_euro_sum_right' id='out50_right'>0</div>
        </div>
        <div id='container20' class='container'>
            <div class='box_euro_unit_right'>20€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input20_right'>
            <div class='box_euro_sum_right' id='out20_right'>0</div>
        </div>
        <div id='container10' class='container'>
            <div class='box_euro_unit_right'>10€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input10_right'>
            <div class='box_euro_sum_right' id='out10_right'>0</div>
        </div>
        <div id='container5' class='container'>
            <div class='box_euro_unit_right'>5€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input5_right'>
            <div class='box_euro_sum_right' id='out5_right'>0</div>
        </div>
        <div id='container2' class='container'>
            <div class='box_euro_unit_right'>2€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input2_right'>
            <div class='box_euro_sum_right' id='out2_right'>0</div>
        </div>
        <div id='container1' class='container'>
            <div class='box_euro_unit_right'>1€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input1_right'>
            <div class='box_euro_sum_right' id='out1_right'>0</div>
        </div>
        <div id='container050' class='container'>
            <div class='box_euro_unit_right'>0,50€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input050_right'>
            <div class='box_euro_sum_right' id='out050_right'>0</div>
        </div>
        <div id='container020' class='container'>
            <div class='box_euro_unit_right'>0,20€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input020_right'>
            <div class='box_euro_sum_right' id='out020_right'>0</div>
        </div>
        <div id='container010' class='container'>
            <div class='box_euro_unit_right'>0,10€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input010_right'>
            <div class='box_euro_sum_right' id='out010_right'>0</div>
        </div>
        <div id='container005' class='container'>
            <div class='box_euro_unit_right'>0,05€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input005_right'>
            <div class='box_euro_sum_right' id='out005_right'>0</div>
        </div>
        <div id='container002' class='container'>
            <div class='box_euro_unit_right'>0,02€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input002_right'>
            <div class='box_euro_sum_right' id='out002_right'>0</div>
        </div>
        <div id='container001' class='container'>
            <div class='box_euro_unit_right'>0,01€</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input001_right'>
            <div class='box_euro_sum_right' id='out001_right'>0</div>
        </div>
        <div id='sum_container' class='sum_container'>
            <div class='box_euro_unit_right'>Summe Vortag:</div>
            <input class='input_unit' type='number' placeholder='0' min='0' id='input200_right' style='visibility: hidden'>
            <div class='box_euro_sum_right' id='complete_sum_right'>0</div>
        </div>
    </div>
</body>
<script>
    function multiply_money_with_number(strInputBox, strOutputBox, monetary_factor) {
        var inputBox = document.getElementById(strInputBox);
        var right_sum_box = document.getElementById('complete_sum_right');
        var middle_sum_box = document.getElementById('complete_sum_middle');

        inputBox.onkeyup = function() {
            // calculate sum only within the row
            var number_payment = inputBox.value;
            var left_sum_box = document.getElementById(strOutputBox)
            left_sum_box.innerHTML = number_payment * monetary_factor;
            middle_sum_box.innerHTML = parseFloat(left_sum_box.innerHTML) - parseFloat(right_sum_box.innerHTML)
        }

    }


    function calc_sum_on_units(outer_box, strInputBox, strOutputBox, monetary_factor) {
        var outer_box_elt = document.getElementById(outer_box);
        var inputBox = document.getElementById(strInputBox);

        // select right or left div box (box_left resp. box_right)
        if (outer_box === 'box_right') {
            var sumBox = document.getElementById('complete_sum_right');
            var positions_euro_sum = outer_box_elt.querySelectorAll('.box_euro_sum_right')
        } else if (outer_box === 'box_left') {
            var sumBox = document.getElementById('complete_sum_left');
            var positions_euro_sum = outer_box_elt.querySelectorAll('.box_euro_sum_left')
        }


        // function
        inputBox.onkeyup = function() {
            // calculate sum onyl in the row
            var number_payment = inputBox.value;
            document.getElementById(strOutputBox).innerHTML = number_payment * monetary_factor;

            // sum up all partial sum
            var sum = 0;
            for (let i = 0; i < 15; i++) {
                sum += parseFloat(positions_euro_sum[i].innerHTML);
            }

            // write final sum to complete_sum_right
            sumBox.innerHTML = sum;
        }
    }


    /**
    Return a subarray elements smaller than a given pivot element.
    @param {array}  euro_units_array    Array containing floats in an decreasing order.
    @param {float}  sum_value           Pivot value to compare against each array element.
    @return {array}                     Subarray from euro_units_array
    **/
    function get_working_array(euro_units_array, sum_value) {
        // init lowest index for euro_units array
        let idx = 0;

        // find smalles element in array which is greater than the sum_value
        while (sum_value < euro_units_array[idx]) {
            idx++;
        }

        // create working_array which lists all elements smaller than
        // (including) the found one
        working_array = euro_units_array.slice(idx);

        return working_array;
    }


    function get_euro_unit_distribution_from_sum() {
        button_item = document.getElementById('button_calculation')

        // init all possible euro payment sizes
        const euro_units = [500, 200, 100, 50, 20, 10, 5, 2, 1, 0.5, 0.2, 0.1, 0.05, 0.02, 0.01];

        // read final sum box values (left and right)
        out_sum_left = document.getElementById('complete_sum_left');
        out_sum_right = document.getElementById('complete_sum_right');
        out_sum_middle_item = document.getElementById('complete_sum_middle');

        button_item.onclick = function() {
            // init values
            var euro_sum = out_sum_middle_item.innerHTML;
            working_array = get_working_array(euro_units, euro_sum)
            var result_frequency_map = {
                500: 0,
                200: 0,
                100: 0,
                50: 0,
                20: 0,
                10: 0,
                5: 0,
                2: 0,
                1: 0,
                0.50: 0,
                0.20: 0,
                0.10: 0,
                0.05: 0,
                0.02: 0,
                0.01: 0
            }

            // choose random euro units from working_array unitl they sum up to euro_sum
            while (euro_sum > 0) {
                working_array = get_working_array(working_array, euro_sum)

                // select random euro_unit from working_array
                random_idx = Math.floor(Math.random() * working_array.length);
                random_euro_unit = working_array[random_idx]

                // increase unit item in frequency map
                result_frequency_map[random_euro_unit] += 1

                // decrease given euro_sum by random_euro_unit
                euro_sum = Number.parseFloat(euro_sum - random_euro_unit).toFixed(2);
            }
        }
    }

    // calc row-wise sums
    calc_sum_on_units('box_right', 'input500_right', 'out500_right', 500.0);
    calc_sum_on_units('box_right', 'input200_right', 'out200_right', 200.0);
    calc_sum_on_units('box_right', 'input100_right', 'out100_right', 100.0);
    calc_sum_on_units('box_right', 'input50_right', 'out50_right', 50.0);
    calc_sum_on_units('box_right', 'input20_right', 'out20_right', 20.0);
    calc_sum_on_units('box_right', 'input10_right', 'out10_right', 10.0);
    calc_sum_on_units('box_right', 'input5_right', 'out5_right', 5.0);
    calc_sum_on_units('box_right', 'input2_right', 'out2_right', 2.0);
    calc_sum_on_units('box_right', 'input1_right', 'out1_right', 1.0);
    calc_sum_on_units('box_right', 'input050_right', 'out050_right', 0.5);
    calc_sum_on_units('box_right', 'input020_right', 'out020_right', 0.2);
    calc_sum_on_units('box_right', 'input010_right', 'out010_right', 0.1);
    calc_sum_on_units('box_right', 'input005_right', 'out005_right', 0.05);
    calc_sum_on_units('box_right', 'input002_right', 'out002_right', 0.02);
    calc_sum_on_units('box_right', 'input001_right', 'out001_right', 0.01);

    multiply_money_with_number('input_sum_actual_left', 'complete_sum_left', 1)

    calc_sum_on_units('box_left', 'input500_left', 'out500_left', 500.0);
    calc_sum_on_units('box_left', 'input200_left', 'out200_left', 200.0);
    calc_sum_on_units('box_left', 'input100_left', 'out100_left', 100.0);
    calc_sum_on_units('box_left', 'input50_left', 'out50_left', 50.0);
    calc_sum_on_units('box_left', 'input20_left', 'out20_left', 20.0);
    calc_sum_on_units('box_left', 'input10_left', 'out10_left', 10.0);
    calc_sum_on_units('box_left', 'input5_left', 'out5_left', 5.0);
    calc_sum_on_units('box_left', 'input2_left', 'out2_left', 2.0);
    calc_sum_on_units('box_left', 'input1_left', 'out1_left', 1.0);
    calc_sum_on_units('box_left', 'input050_left', 'out050_left', 0.5);
    calc_sum_on_units('box_left', 'input020_left', 'out020_left', 0.2);
    calc_sum_on_units('box_left', 'input010_left', 'out010_left', 0.1);
    calc_sum_on_units('box_left', 'input005_left', 'out005_left', 0.05);
    calc_sum_on_units('box_left', 'input002_left', 'out002_left', 0.02);
    calc_sum_on_units('box_left', 'input001_left', 'out001_left', 0.01);

    get_euro_unit_distribution_from_sum()
</script>

</html>